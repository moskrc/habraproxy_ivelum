Здравствуйте! Так как habrahabr перешел на HTTPS и по ТЗ чем меньше кода тем лучше и 
можно использовать любые сторонние библиотеки - я использовал вот эту 
штуку https://github.com/inaz2/proxy2 (так как с https кода становится заметно больше). 
Но так как она не поддерживает Python3 и ее нельзя установить через pip то я сделал себе 
форк, поправил чуть чуть, добавил setup.py, manifest и чтобы скрипт для генерации 
сертификатов запускать можно было и... вроде все. Модифицированная библиотека здесь 
https://github.com/moskrc/proxy2/tree/python3. Она не супер, и нет тестов и документации,
но это работает и работат как я хотел, думаю и достаточно для этих целей. Код чтобы 
поправить хабр это - hproxy.py. Зависимости в requirements.txt.

Еще есть видео как это работает (без регистрации и смс): https://www.dropbox.com/s/q1eepvhzjw5i6l5/hproxy.mp4?dl=0 ;)
